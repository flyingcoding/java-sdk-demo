# å¤šç¾¤ç»„å¹¶è¡Œå‹æµ‹ä½¿ç”¨æŒ‡å—

## ğŸ“ æ¦‚è¿°

å·²æˆåŠŸä¸ºé¡¹ç›®æ·»åŠ å¤šç¾¤ç»„å¹¶è¡Œå‹æµ‹åŠŸèƒ½ï¼Œå¯ä»¥åŒæ—¶å¯¹å¤šä¸ª FISCO BCOS ç¾¤ç»„æ‰§è¡Œå‹æµ‹ã€‚

## âœ… å®Œæˆæƒ…å†µ

- âœ… æ–°å¢ `PerformanceMultiGroupDMC` å‹æµ‹ç±»
- âœ… ä»£ç å·²ç¼–è¯‘å¹¶æ‰“åŒ…æˆåŠŸ
- âœ… æä¾›è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
- âœ… æä¾›ä¾¿æ·å¯åŠ¨è„šæœ¬
- âœ… æ›´æ–°é¡¹ç›® README

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### ç¬¬ä¸€æ­¥ï¼šç¼–è¯‘é¡¹ç›®

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
bash gradlew build
```

### ç¬¬äºŒæ­¥ï¼šé…ç½® SDK

```bash
# æ‹·è´ FISCO BCOS èŠ‚ç‚¹çš„ SDK è¯ä¹¦
cp -r ~/fisco/nodes/127.0.0.1/sdk/* conf/

# æ‹·è´é…ç½®æ–‡ä»¶æ¨¡æ¿
cp src/test/resources/config-example.toml conf/config.toml

# ç¼–è¾‘ conf/config.tomlï¼Œä¿®æ”¹èŠ‚ç‚¹åœ°å€
# ä¾‹å¦‚ï¼špeers=["127.0.0.1:20200", "127.0.0.1:20201"]
```

### ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œå‹æµ‹

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨é»˜è®¤å‚æ•°ï¼ˆ3ä¸ªç¾¤ç»„ï¼Œæ¯ç¾¤ç»„8ä¸ªè´¦æˆ·ï¼Œ10000ç¬”äº¤æ˜“ï¼ŒQPS=100ï¼‰
./multi_group_test.sh

# è‡ªå®šä¹‰å‚æ•°
./multi_group_test.sh "group0,group1" 16 20000 200
```

#### æ–¹æ³•äºŒï¼šç›´æ¥è¿è¡Œ Java å‘½ä»¤

```bash
cd dist

# å¯¹ä¸‰ä¸ªç¾¤ç»„åŒæ—¶å‹æµ‹
java -cp 'conf/:lib/*:apps/*' \
    org.fisco.bcos.sdk.demo.perf.PerformanceMultiGroupDMC \
    group0,group1,group2 8 10000 100
```

## ğŸ“Š å‚æ•°è¯´æ˜

```bash
java ... PerformanceMultiGroupDMC [ç¾¤ç»„åˆ—è¡¨] [è´¦æˆ·æ•°] [äº¤æ˜“æ•°] [QPS]
```

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ |
|------|------|--------|
| ç¾¤ç»„åˆ—è¡¨ | ç”¨é€—å·åˆ†éš”ï¼Œå¦‚ `group0,group1,group2` | 3ä¸ªç¾¤ç»„ |
| è´¦æˆ·æ•° | æ¯ä¸ªç¾¤ç»„åˆ›å»ºçš„è´¦æˆ·æ•°é‡ | 8-16 |
| äº¤æ˜“æ•° | æ¯ä¸ªç¾¤ç»„çš„äº¤æ˜“æ€»æ•° | 10000 |
| QPS | æ¯ä¸ªç¾¤ç»„çš„æ¯ç§’è¯·æ±‚æ•° | 100 |

## ğŸ“ˆ è¾“å‡ºç¤ºä¾‹

```
====== Multi-Group DMC Performance Test ======
Groups: group0,group1,group2
User count per group: 8
Transactions per group: 10000
Total groups: 3
Total transactions: 30000
================================================

[Group 0: group0] Starting test...
[Group 1: group1] Starting test...
[Group 2: group2] Starting test...

... æ‰§è¡Œè¿‡ç¨‹ ...

====================================================================
==================== Multi-Group Test Summary =====================
====================================================================
Total groups tested: 3
Total transactions: 30000
Total time: 106789ms
Overall TPS: 280.93
====================================================================
```

## ğŸ” åŠŸèƒ½ç‰¹ç‚¹

1. **å¹¶è¡Œæ‰§è¡Œ**ï¼šå¤šä¸ªç¾¤ç»„åŒæ—¶å‹æµ‹ï¼Œå……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æº
2. **ç‹¬ç«‹ç»Ÿè®¡**ï¼šæ¯ä¸ªç¾¤ç»„æœ‰ç‹¬ç«‹çš„æ€§èƒ½æŠ¥å‘Š
3. **å®æ—¶è¿›åº¦**ï¼šä½¿ç”¨è¿›åº¦æ¡æ˜¾ç¤ºå‘é€å’Œæ¥æ”¶è¿›åº¦
4. **æ€»ä½“æ±‡æ€»**ï¼šæä¾›æ‰€æœ‰ç¾¤ç»„çš„æ€»ä½“æ€§èƒ½ç»Ÿè®¡

## ğŸ“‚ ç›¸å…³æ–‡ä»¶

- **æ ¸å¿ƒä»£ç **: `src/main/java/org/fisco/bcos/sdk/demo/perf/PerformanceMultiGroupDMC.java`
- **å¿«é€ŸæŒ‡å—**: `MULTI_GROUP_USAGE.md`
- **è¯¦ç»†æ–‡æ¡£**: `docs/MultiGroupPerformanceTest.md`
- **å¯åŠ¨è„šæœ¬**: `multi_group_test.sh`
- **é¡¹ç›®çŠ¶æ€**: `PROJECT_STATUS.md`

## ğŸ¯ åœ¨ Ubuntu ä¸Šæµ‹è¯•

### 1. ä¸Šä¼ é¡¹ç›®

```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
scp -r java-sdk-demo user@ubuntu-server:/home/user/
```

### 2. åœ¨ Ubuntu ä¸Šç¼–è¯‘

```bash
# SSH ç™»å½•åˆ° Ubuntu
ssh user@ubuntu-server

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/user/java-sdk-demo

# ç¼–è¯‘é¡¹ç›®
bash gradlew build
```

### 3. é…ç½®å’Œè¿è¡Œ

```bash
# é…ç½® SDKï¼ˆæ ¹æ®å®é™…èŠ‚ç‚¹åœ°å€ä¿®æ”¹ï¼‰
cp -r /path/to/fisco/nodes/127.0.0.1/sdk/* conf/
cp src/test/resources/config-example.toml conf/config.toml
vim conf/config.toml  # ä¿®æ”¹èŠ‚ç‚¹åœ°å€

# æ‰§è¡Œå‹æµ‹
./multi_group_test.sh
```

## âš™ï¸ æ€§èƒ½è°ƒä¼˜

### ç³»ç»Ÿé…ç½®

```bash
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
ulimit -n 65535
```

### JVM å‚æ•°ï¼ˆå¤§è§„æ¨¡å‹æµ‹ï¼‰

```bash
java -Xmx4g -Xms4g -XX:+UseG1GC \
    -cp 'conf/:lib/*:apps/*' \
    org.fisco.bcos.sdk.demo.perf.PerformanceMultiGroupDMC \
    group0,group1,group2 8 10000 100
```

## â“ å¸¸è§é—®é¢˜

**Q1: å¦‚ä½•ç¡®å®šæœ€ä½³å‚æ•°ï¼Ÿ**  
A: ä»å°å‚æ•°å¼€å§‹ï¼ˆQPS=50, count=1000ï¼‰ï¼Œé€æ­¥å¢åŠ ç›´åˆ°è¾¾åˆ°æ€§èƒ½ç“¶é¢ˆã€‚

**Q2: å¯ä»¥å¯¹åŒä¸€ä¸ªç¾¤ç»„å‹æµ‹å¤šæ¬¡å—ï¼Ÿ**  
A: å¯ä»¥ï¼Œä½†å»ºè®®ä¸€æ¬¡å‹æµ‹å®Œæˆåå†è¿›è¡Œä¸‹ä¸€æ¬¡ï¼Œä¸è¦åœ¨å‚æ•°ä¸­é‡å¤ç¾¤ç»„IDã€‚

**Q3: æŸä¸ªç¾¤ç»„å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ**  
A: å„ç¾¤ç»„ç‹¬ç«‹æ‰§è¡Œï¼Œå•ä¸ªå¤±è´¥ä¸å½±å“å…¶ä»–ç¾¤ç»„ã€‚æ£€æŸ¥å¤±è´¥ç¾¤ç»„çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—ã€‚

**Q4: æ€»ä½“ TPS èƒ½å¦è¾¾åˆ°å•ç¾¤ç»„çš„ N å€ï¼Ÿ**  
A: ç†è®ºä¸Šå¯ä»¥ï¼Œå®é™…å–å†³äºèŠ‚ç‚¹å¤„ç†èƒ½åŠ›ã€ç½‘ç»œå¸¦å®½å’Œç³»ç»Ÿèµ„æºã€‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- è¯¦ç»†æ–‡æ¡£ï¼šæŸ¥çœ‹ `docs/MultiGroupPerformanceTest.md`
- å˜æ›´è¯´æ˜ï¼šæŸ¥çœ‹ `CHANGES.md`
- é¡¹ç›®çŠ¶æ€ï¼šæŸ¥çœ‹ `PROJECT_STATUS.md`

## âœ¨ ä¸‹ä¸€æ­¥

1. åœ¨ Ubuntu ç¯å¢ƒéƒ¨ç½² FISCO BCOS å¤šç¾¤ç»„èŠ‚ç‚¹
2. é…ç½®èŠ‚ç‚¹è¿æ¥å’Œè¯ä¹¦
3. æ‰§è¡Œå°è§„æ¨¡æµ‹è¯•éªŒè¯åŠŸèƒ½
4. é€æ­¥å¢åŠ è´Ÿè½½è¿›è¡Œæ€§èƒ½æµ‹è¯•
5. åˆ†æç»“æœå¹¶è°ƒä¼˜å‚æ•°

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰
